(function(a,b){"use strict";var c=function(a){return a.matchesSelector||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector}(b.documentElement),d=function(a,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=b.createEvent("CustomEvent");return d.initCustomEvent(a,c.bubbles,c.cancelable,c.detail),d};d.prototype=a.CustomEvent.prototype,a.CustomEvent=d;var e=function(){var c={};return c.options={method:"GET",url:a.location.href,async:!0},c.ajax=function(a,c){"object"==typeof a&&(c=a,a=void 0),c=c||{},a=a||c.url||location.href||"";var e;e=new XMLHttpRequest,e.addEventListener("load",function(){var a=new d("ajaxComplete",{detail:e});b.dispatchEvent(a)}),"function"==typeof c.success&&e.addEventListener("load",function(a){e.status>=200&&e.status<300&&c.success(e)}),"function"==typeof c.error&&(e.addEventListener("load",function(a){(e.status<200||e.status>=300)&&c.error(e)}),e.addEventListener("error",function(a){c.error(e)})),e.open(c.method||"GET",a,c.async);var f=new d("ajax:before",{detail:e});return b.dispatchEvent(f),e.send(c.data),e},c}();b.addEventListener("click",function(a){function d(a){var c,d,e;if("GET"==a.method)return!1;c=b.createElement("form"),c.method="POST",c.action=a.url,c.style.display="none";for(e in a.data)Object.prototype.hasOwnProperty.call(a.data,e)&&(d=b.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name",e),d.setAttribute("value",a.data[e]),c.appendChild(d));return"POST"!=a.method&&(d=b.createElement("input"),d.setAttribute("type","hidden"),d.setAttribute("name","_method"),d.setAttribute("value",a.method),c.appendChild(d)),b.body.appendChild(c),c.submit(),!0}function g(a){return e.ajax(a),!0}var h,i,j,k,l;if(h=a.target,c.call(h,"a[data-method]")){if(i=h.getAttribute("href"),j=h.getAttribute("data-method").toUpperCase(),k={},f.param()&&f.token()&&(k[f.param()]=f.token()),l=c.call(h,"a[data-remote]")?g:d,!l({url:i,method:j,data:k}))return!0;a.preventDefault()}},!1),b.addEventListener("click",function(a){var b,d;if(d=a.target,c.call(d,"a[data-confirm], button[data-confirm]")){if(b=d.getAttribute("data-confirm"),!confirm(b))return a.stopPropagation(),a.stopImmediatePropagation(),a.preventDefault(),!1}else;},!1);var f={token:function(){var a=b.querySelector('meta[name="csrf-token"]');return a&&a.getAttribute("content")},param:function(){var a=b.querySelector('meta[name="csrf-param"]');return a&&a.getAttribute("content")}},g=function(c){var d,e=b.createElement("a");return e.href=c,d=e.href.split("/",3).join("/"),0===a.location.href.indexOf(d)};a.CSRF=f,b.addEventListener("ajax:before",function(a){var b=f.token(),c=a.detail;b&&c.setRequestHeader("X-CSRF-Token",b)}),b.addEventListener("submit",function(a){var d=f.token(),e=f.param(),h=a.target;if(c.call(h,"form")){if(c.call(h,"form[data-remote]"))return!0;if(!h.method||"GET"==h.method.toUpperCase())return!0;if(!g(h.action))return!0;if(e&&d&&!h.querySelector("input[name="+e+"]")){var i=b.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",e),i.setAttribute("value",d),h.appendChild(i)}return!0}})}).call(null,window,document);
//# sourceMappingURL=vanilla-ujs.min.js.map